# Configuration du système de monitoring
# Copiez ce fichier vers .env.monitoring.local et personnalisez les valeurs

# === GRAFANA ===
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin123
GRAFANA_PORT=3001

# === PROMETHEUS ===
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=200h

# === ALERTMANAGER ===
ALERTMANAGER_PORT=9093

# === EXPORTERS ===
NODE_EXPORTER_PORT=9100
CADVISOR_PORT=8080
MYSQL_EXPORTER_PORT=9104
REDIS_EXPORTER_PORT=9121
NGINX_EXPORTER_PORT=9113

# === BASE DE DONNÉES ===
# Connexion MySQL pour l'exporter
MYSQL_EXPORTER_DATA_SOURCE_NAME=hospital_user:password@(hospital_mysql:3306)/hospital_db

# Connexion Redis pour l'exporter  
REDIS_EXPORTER_REDIS_ADDR=redis://hospital_redis:6379

# === NOTIFICATIONS ===
# Email pour les alertes
ALERT_EMAIL_TO=admin@hospital.local
ALERT_EMAIL_FROM=alertmanager@hospital.local

# SMTP Configuration (utilise MailHog par défaut)
SMTP_HOST=hospital_mailhog
SMTP_PORT=1025
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_REQUIRE_TLS=false

# Webhook Slack (optionnel)
SLACK_WEBHOOK_URL=

# === SÉCURITÉ ===
# Clé secrète pour Grafana
GF_SECURITY_SECRET_KEY=your-secret-key-here

# Désactiver l'inscription utilisateur
GF_USERS_ALLOW_SIGN_UP=false

# === PERFORMANCE ===
# Intervalle de collecte des métriques (en secondes)
SCRAPE_INTERVAL=15s
EVALUATION_INTERVAL=15s

# Timeout pour les requêtes
SCRAPE_TIMEOUT=10s

# === STOCKAGE ===
# Rétention des données Prometheus
PROMETHEUS_STORAGE_RETENTION_TIME=200h
PROMETHEUS_STORAGE_RETENTION_SIZE=50GB

# === RÉSEAU ===
# Réseau Docker pour le monitoring
MONITORING_NETWORK=monitoring_network
HOSPITAL_NETWORK=hospital_network

# === PLUGINS GRAFANA ===
# Liste des plugins à installer automatiquement
GF_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource,grafana-worldmap-panel,grafana-piechart-panel

# === LOGS ===
# Niveau de log pour les services
LOG_LEVEL=info

# === MÉTRIQUES PERSONNALISÉES ===
# Activation des métriques détaillées
ENABLE_DETAILED_METRICS=true

# Cache des métriques (en secondes)
METRICS_CACHE_TTL=30

# === ALERTES ===
# Seuils d'alerte personnalisables
ALERT_CPU_THRESHOLD=80
ALERT_MEMORY_THRESHOLD=85
ALERT_DISK_THRESHOLD=90
ALERT_RESPONSE_TIME_THRESHOLD=2
ALERT_ERROR_RATE_THRESHOLD=5

# Délais d'alerte (format: 5m, 1h, etc.)
ALERT_CPU_FOR=5m
ALERT_MEMORY_FOR=5m
ALERT_DISK_FOR=5m
ALERT_RESPONSE_TIME_FOR=5m
ALERT_ERROR_RATE_FOR=5m

# === MÉTRIQUES MÉTIER ===
# Seuils spécifiques à l'hôpital
HOSPITAL_MAX_PATIENTS=500
HOSPITAL_MIN_BED_AVAILABILITY=10
HOSPITAL_MAX_PENDING_APPOINTMENTS=100

# === DÉVELOPPEMENT ===
# Mode debug pour le développement
DEBUG_MODE=false

# Exposition des métriques internes
ENABLE_INTERNAL_METRICS=true
